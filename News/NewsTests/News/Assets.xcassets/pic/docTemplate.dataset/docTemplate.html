<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
        <meta name="format-detection" content="telephone=no"/>
        <title>凤凰新闻</title>
        
        <link rel="stylesheet" type="text/css" href="<!--{css}-->">
            <script type="text/javascript" src='jquery1.11.js'></script>
    </head>
    
    <body>
        <!--{order}-->
        
        <!--{headImg}-->
        
        <div id="article" class="article">
            <!--{title}-->
            
            <!--{time_source}-->
            
            <!--{info}-->
            <div id="tip_divider" class="tip-divider" style="display:none" ></div>
            <div class="%@" id="content">
                <!--{audio}-->
                
                <!--{video}-->
                
                <!--{slides}-->
                
                <!--{param-1}-->
                
                <div id="docContent">
                    <!--{text}-->
                </div>
                
            </div>
            <!--{tip}-->
            
            <!--{editorCode}-->
            
          
            <div class="textBottom"></div>
        </div>
        
        <!--{disclaimer}-->
        <!--{originalLink}-->
        
        <div style="height:0px;width=100%" id="lastObj" ></div>
    </body>
    
    
</html>
<script type="text/javascript">
 
 
 var isScrollStart=false;
    String.prototype.endsWith = function(suffix) {
        return this.indexOf(suffix, this.length - suffix.length) !== -1;
    };
    
    //获取元素的纵坐标
    function getTop(e){
        var offset=e.offsetTop;
        if(e.offsetParent!=null) offset+=getTop(e.offsetParent);
        return offset;
    }
//获取元素的横坐标
function getLeft(e){
    var offset=e.offsetLeft;
    if(e.offsetParent!=null) offset+=getLeft(e.offsetParent);
    return offset;
}


function videoClick(obj,index){
    
    var div=obj.parentNode.parentNode;
    /*var carryDiv = obj.parentNode.parentNode.parentNode;*/
    if(div){
        /*var oldHeight=div.offsetHeight;
      
        div.className="videoSection videoheight_big lazy2";*/
        var top=getTop(div);
        var left=getLeft(div);
        var width=div.offsetWidth;
        var height=div.offsetHeight;
     
        /*最外层的div 高度  和底部放视频客户端的div top  随着变大*/
        /*carryDiv.className = "videoCarry video_carry_playHeight";*/
        
     
        if(grounds){
            /*grounds.playVideo(index,top,left,width,height,oldHeight);*/
            grounds.playVideo(index,top,left,width,height);
        }
        
        
    }
}


function changeSurveyHeight(index,height){
    var surveyn = "survey" + index;
    var obj=document.getElementById(surveyn);
    
    if(obj){
        obj.style.height = height+'px';
    }
    return "";
}

function surveyFrame(index){
    var surveyn = "survey" + index;
    var obj=document.getElementById(surveyn);
    if(obj){
        var top=getTop(obj);
        var left=getLeft(obj);
        var width=obj.offsetWidth;
        var height=obj.offsetHeight;
        return ""+left+","+top+","+width+","+height;
    }else{
        return "";
    }
}


function videoAppClick(obj,index){
    
    var div=obj.parentNode.parentNode;
    if(div){
        if(grounds){
            grounds.openVideoApp(index);
        }
    }
}

function changeFont(flag){
    
    var divcontent="content ";
    var noteclass="img-note ";
    var earlierContent="earlier-content ";
    var earlierTitle="earlier_title ";
    var earlierTime="earlier-time ";
    var disclaimer ="disclaimer-note ";
    /*var essayContent="p_text_content ";*/
    var essayTitle="p_text_title ";
    var essayTime="p_text_date ";
    
    
    switch(flag){
        case 0:
        divcontent+="content_middle";
        noteclass+="note_font_middle";
        earlierContent+="earlierContent_font_middle";
        earlierTitle+="earlierTitle_font_middle";
        earlierTime+="earlierTime_font_middle";
        disclaimer+="disclaimer_middle";
        essayTitle+="essayTitle_font_middle";
        essayTime+="essayTime_font_middle";
        break;
        
        case -2:
        divcontent+="content_small";
        noteclass+="note_font_small";
        earlierContent+="earlierContent_font_small";
        earlierTitle+="earlierTitle_font_small";
        earlierTime+="earlierTime_font_small";
        disclaimer+="disclaimer_small";
        essayTitle+="essayTitle_font_small";
        essayTime+="essayTime_font_small";
        break;
        case 2:
        divcontent+="content_big";
        noteclass+="note_font_big";
        earlierContent+="earlierContent_font_big";
        earlierTitle+="earlierTitle_font_big";
        earlierTime+="earlierTime_font_big";
        disclaimer+="disclaimer_big";
        essayTitle+="essayTitle_font_big";
        essayTime+="essayTime_font_big";
        break;
        case 4:
        divcontent+="content_biggest";
        noteclass+="note_font_biggest";
        earlierContent+="earlierContent_font_biggest";
        earlierTitle+="earlierTitle_font_biggest";
        earlierTime+="earlierTime_font_biggest";
        disclaimer+="disclaimer_biggest";
        essayTitle+="essayTitle_font_biggest";
        essayTime+="essayTime_font_biggest";
        break;
        case 6:
        divcontent+="content_huge";
        noteclass+="note_font_huge";
        earlierContent+="earlierContent_font_huge";
        earlierTitle+="earlierTitle_font_huge";
        earlierTime+="earlierTime_font_huge";
        disclaimer+="disclaimer_huge";
        essayTitle+="essayTitle_font_huge";
        essayTime+="essayTime_font_huge";
        break;

        
    }
  
    var content=document.getElementById("content");
    content.className=divcontent;
    var smalls=document.getElementsByTagName("small");
    for(var i=0;i<smalls.length;i++){
        smalls[i].className=noteclass;
    }
    var spans=document.getElementsByTagName("span");
    for(var i=0;i<spans.length;i++){
        spans[i].className=spans[i].className;
    }
    
    
    var div = Array.prototype.slice.call(document.getElementsByTagName('p'));
    for ( var i = 0; i < div.length; i++){
        var container = div[i];
        
        var fdStart = container.className.indexOf("p_text_date");
        /* indexOf 方法返回一个整数值，指出 container.className 对象内子字符串的开始位置(如果在第一个位置则是0)。所以如果没有找到子字符串，则返回 -1。*/
        if(fdStart > -1){
            container.className=essayTime;
        }
        fdStart = container.className.indexOf("p_text_title");
        if(fdStart > -1) {
            container.className=essayTitle;
        }
        /*内容的字体 又 不用单独处理了*/
        /*fdStart = container.className.indexOf("p_text_content");
        if(fdStart > -1) {
            container.className=essayContent;
        }*/
    }
    
    var div=document.getElementById("earlierContent");
    if(div)
    div.className=earlierContent;
    var div=document.getElementById("earlierTitle");
    if(div)
    div.className=earlierTitle;
    var div=document.getElementById("earlierTime");
    if(div)
    div.className=earlierTime;
    var div=document.getElementById("disclaimerContent");
    if(div)
    div.className=disclaimer;
  
  grounds.changeFontDelegate();
  
}

function checkIsFirstImg(){
    
    var tip=document.getElementById('tip_id');
    if(tip){
        if(document.getElementById('up_pic')){
            return true;
        }
        
    var div = document.getElementById('docContent');
    var tags=div.childNodes;
     for(var i=0;i<tags.length;i++){
        var p=tags[i];
        if(p.tagName=='DIV'){
            return true;
        }else if(p.tagName=='P' && $(p).text()){
            return false;
        }else if(i>5){
            return false;
        }
     }
    }else{
        return true;
    }
    

}

function goSlides(slide){
    if(grounds){
        grounds.goSlider(slide.getAttribute('data-original'));
    }
}


function goOrigin(){
    if(grounds){
        grounds.goOrigin("");
    }
}

function showPic(div){

    
    
    if(div){
        var imgtag=div.getElementsByTagName("img")[0];
        var src=imgtag.getAttribute('src');
        if(imgtag &&( src==null || src.substring(0,19)=="doc_imagebg_noimage" || src.substring(0,19)=="doc_imagebg_offline")){/*点击无图*//*判断以这两个串开头的，这样做是为了日夜间的都能查询到*/
            var url=div.getAttribute('data-original');
            imgtag.setAttribute('src',url);
            
            imgtag.setAttribute('width',div.getAttribute('newWidth'));
            imgtag.setAttribute('height',div.getAttribute('newHeight'));
            /*无图的图片高度*/
            var noImgHeight = div.offsetHeight;
            
            /*点击之后有边框 切换到另一个class*/
            div.className="img_p lazy_img_noimg_showPic";
            div.style.width = div.getAttribute('newWidth');
            div.style.height = div.getAttribute('newHeight');
            
            /*图片的高度*/
            var imgHeight=div.offsetHeight;
            
            if(grounds){
                grounds.noImgShowPic(noImgHeight,imgHeight);
            }
            
            
        }else{/*查看大图*/
            var top=getTop(div);
            var left=getLeft(div);
            var width=div.offsetWidth;
            var height=div.offsetHeight;
          
            
            if(grounds){
                grounds.showPic(div.getAttribute('data-original'),top,left,width,height);
            }

        }
    }

}



function formatImg(fragment){
    
    var imgs=Array.prototype.slice.call(fragment.getElementsByTagName('img'));
    if(imgs.length>0){
        isImg=1;
    }
    for ( var i = 0; i < imgs.length; i++){
        var img = imgs[i];
        var parent = img.parentNode;
        if(parent.childNodes.length>1){
            var p=document.createElement('p');
            parent.replaceChild(p,img);
            p.appendChild(img);
            p.className='img_p';
        }else{
            parent.className='img_p';
        }
        
        
    }
    
}

function audioFrame(){
    var obj=document.getElementById("audio");
    if(obj){
        var top=getTop(obj);
        var left=getLeft(obj);
        var width=obj.offsetWidth;
        var height=obj.offsetHeight;
        return ""+left+","+top+","+width+","+height;
    }else{
        return "";
    }
}

function dispatchLink(obj){
    
    var href=obj.getAttribute('href');
    var type=obj.getAttribute('type');
    if(!type || type==''){
        type="web";
    }
    if(grounds){
        grounds.dispatchLink(type+"",href+"");
    }
    
    
    return false;
}

function addDocAd(url){
   
    
    var obj = document.getElementById("docAd");
    if(obj){
   
        obj.className="doc_inner_ad";
     
        obj.style.background="url("+url+") no-repeat center center";
        
        obj.style.display="block";
     
     var top=getTop(obj);
     var left=getLeft(obj);
     var width=obj.offsetWidth;
     var height=obj.offsetHeight;
     return ""+left+","+top+","+width+","+height;

    }
    
    return "";
}

function frameOfDocInnerAd(){
    var obj = document.getElementById("docAd");
    if(obj){
        var top=getTop(obj);
        var left=getLeft(obj);
        var width=obj.offsetWidth;
        var height=obj.offsetHeight;
        return ""+left+","+top+","+width+","+height;

    }
    return "";
}


function addLoadLazy(offset){
    
   

    
    fromatLazy(offset);
    
    
    isScrollStart=true;

}


function lastObjFrame(){
    
   
    
    var obj=document.getElementById("lastObj");
    if(obj){
        var top=getTop(obj);
        var left=getLeft(obj);
        var width=obj.offsetWidth;
        var height=obj.offsetHeight;
        return ""+left+","+top+","+width+","+height;
    }else{
        return "";
    }
    
    
}



function formatText(fragment){
    
    try{
        
        var b=fragment.getElementsByTagName('p');
        
        var lasterp=null;
        var eles = Array.prototype.slice.call(fragment.getElementsByTagName('p'));
        for ( var i = 0; i < eles.length; i++){
            var container = eles[i];
            if(container.className==="p_text_title") {
                container.className+=' %@';
            }
            if(container.className==="p_text_date") {
                container.className+=' %@';
            }
            /*内容的字体 又 不用单独处理了*/
            /*if(container.className==="p_text_content") {
                container.className+=' %@';
            }*/
            
            
            /*var imgs= Array.prototype.slice.call(fragment.getElementsByTagName('img'));
            if(imgs.length>0 && imgcount == 0) {
                imgcount=1;
            }*/
            
            if(container.getElementsByTagName('small').length === 1) {
                if(isImg == 0){/*没有图片，但是有small标签*/
                    container.className += ' small-note';
                }else{
                    container.className += ' img-note';
                }
                
            }
            if($(container).text()){
                lasterp=container;
            }
            
            
        }
        
        var spanA = document.getElementsByTagName('span');
        for ( var i = 0; i < spanA.length; i++){
            
            (function(i){
                if(spanA[i].innerHTML!="" && spanA[i].className=="telephone"){
                        spanA[i].onclick=function(){
             
                            callPhone(spanA[i].innerHTML);
             
                    }
                }
             
             })(i);
            
        }
        
        var smalls=document.getElementsByTagName('small');
        for(var i=0;i<smalls.length;i++){
            smalls[i].className='img-note %@';
        }

        
        if(lasterp)
        lasterp.innerHTML=lasterp.innerHTML+"<img height=\"%fpx\" width=\"%fpx\"  src=\"%@\"/>";
        

        return fragment.innerHTML;
    }catch(e){
        
        
    }
    
}

function callPhone(telephoneNum){
    
    if(telephoneNum){
        telephoneNum+="";
        if(grounds){
            grounds.callPhone(telephoneNum);
            
        }
    }
    
}

var div=document.getElementById("docContent");
var isImg=0;

formatImg(div);
formatText(div);

if(!checkIsFirstImg()){
    var divider=document.getElementById("tip_divider");
    divider.style.display='block';
}

function fromatLazy(contentY){
    
    try{
        var preScreen=2*window.innerHeight;
  var obj=  document.getElementsByClassName('lazy');
  var n=obj.length;
  var element;
  var y;
  var dataOriginal=null;

 
  for(var i=0;i<n;i++){
      element=obj[i];
      if(element.tagName=='IMG' &&
         (element.getAttribute('src')==null || element.getAttribute('src')== undefined || element.getAttribute('src')=='') &&
         element.getAttribute('data-original').length>0){
          y=getTop(element);
          if((contentY+window.innerHeight+preScreen)>y){
              
              if((element.height+y+preScreen)>contentY){
                  dataOriginal = element.getAttribute('data-original');
              element.setAttribute('src',dataOriginal);
              if(!dataOriginal.endsWith('gif')){
              element.className+=' imgLoadfade';
              }
              }
          }else{
              break;
          }
          
      }else if(element.tagName=='DIV' && (element.style.backgroundImage==null ||
                                      element.style.backgroundImage== undefined ||
                                      element.style.backgroundImage ==''     ) &&
               element.getAttribute('data-original').length>0){
        
          y=getTop(element);
          if((contentY+window.innerHeight+preScreen)>y){
              
       
                if((element.offsetHeight+y+preScreen)>contentY){
                    dataOriginal = element.getAttribute('data-original');
                   
                
                  /*  if(!dataOriginal.endsWith('gif')){
                        element.className+=' imgLoadfade';
                    }*/
         
                  element.style.backgroundImage="url('" + dataOriginal + "')";
               
                    
                }
               
          
          }else{
              break;
          }
        
      }
  }
 
    }catch(e){
       // alert(e);
    }

}


function scrollViewDidScroll(contentY){
    if(isScrollStart)
    fromatLazy(contentY);
}

function closeAD(event){
    var obj = document.getElementById("docAd");
    if(obj){
        obj.style.display="none";
        grounds.closeInnerTextAd();
        window.event? window.event.cancelBubble = true : event.stopPropagation();//停止冒泡
    }
}

function clickinnerextAD(){
    grounds.clickTextAD();
}

/*
function clickTextAD{
    alert(1);
    grounds.clickTextAD();
}


*/



    </script>
